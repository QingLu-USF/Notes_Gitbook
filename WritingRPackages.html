
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Writing R Packages Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Useful_Resources.html" />
    
    
    <link rel="prev" href="setup_gitbook_github.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="setup_gitbook_github.html">
            
                <a href="setup_gitbook_github.html">
            
                    
                    Tips on Setting Up GitHub for Gitbook
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3" data-path="WritingRPackages.html">
            
                <a href="WritingRPackages.html">
            
                    
                    Writing R Packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Useful_Resources.html">
            
                <a href="Useful_Resources.html">
            
                    
                    Useful Resources
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Writing R Packages</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="writing-r-packages">Writing R Packages</h1>
<h2 id="writing-r-packages-in-rstudio">Writing R Packages in RStudio</h2>
<p><strong>Step 1:</strong>  Create a new package in RStudio by clicking &quot; <strong>File -&gt; New Project -&gt; New Directory -&gt; R Package</strong> &quot;, check &quot;Create a git repository&quot;. The &quot;Open in a new session&quot; may also be checked.  </p>
<p>Create some R script files in the folder &quot;R&quot;. The format of the comment for functions defined in the files should follow the examples later on this page.  </p>
<h3 id="to-create-data-set-files">To create data set files:</h3>
<p><strong>Approach 1:</strong>  </p>
<ol>
<li>First create a folder &quot;Data&quot; in the package directory;   </li>
<li>Save data variable into the &quot;Data&quot; folder with the following R code:  <pre><code class="lang-r">save(DataSetName,file=<span class="hljs-string">&quot;DataSetName.RData&quot;</span>)
</code></pre>
</li>
</ol>
<p>Note: after the package is loaded by library(package name), the data set can be accessed via the name DataSetName. One file contains a single object with the same name as the file.  </p>
<p><strong>Approach 2:</strong><br>In the R project directory, run the following codes:</p>
<pre><code class="lang-r">install.packages(<span class="hljs-string">&quot;devtools&quot;</span>)  
<span class="hljs-keyword">library</span>(devtools)  
use_data(DataSetName)
</code></pre>
<p>See more details on including data sets in the R package at <a href="https://r-pkgs.org/data.html" target="_blank">https://r-pkgs.org/data.html</a>   </p>
<h3 id="to-create-documentation-for-a-data-set-file">To create documentation for a data set file:</h3>
<ol>
<li>In RStudio, select &quot;<strong>File -&gt; New File -&gt; R Documentation...</strong>&quot;  </li>
<li>In the popup windown, enter the data set file name in the &quot;Topic name&quot; textbox, and select &quot;Dataset&quot; as Rd template.  </li>
</ol>
<p>See more details on dataset documentation at <a href="https://r-pkgs.org/data.html" target="_blank">https://r-pkgs.org/data.html</a> and <a href="https://cran.r-project.org/doc/manuals/R-exts.html#Documenting-data-sets" target="_blank">https://cran.r-project.org/doc/manuals/R-exts.html#Documenting-data-sets</a><br><br><br></p>
<p>After the data files and R script files are created, to create the R package, in the Console, run:  </p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(roxygen2)  
roxygenise()
</code></pre>
<p><strong>Step 2:</strong>  Stage and commit  </p>
<ul>
<li>Click the &#x201C;Git&#x201D; tab in upper right pane</li>
<li>Check &#x201C;Staged&#x201D; box for all files you want to commit.<ul>
<li>Default: stage everything</li>
<li>When to do otherwise: this will all go to GitHub. So consider if that is appropriate for each file. You can absolutely keep a file locally, without committing it to the Git repo and sending to GitHub. Just let it sit there in your Git pane, without being staged. No harm will be done. If this is a long-term situation, list the file in .gitignore.</li>
</ul>
</li>
<li>If you&#x2019;re not already in the Git pop-up, click &#x201C;Commit&#x201D;</li>
<li>Type a message in &#x201C;Commit message&#x201D;.</li>
<li>Click &#x201C;Commit&#x201D;  </li>
</ul>
<p><strong>Step 3:</strong>  Make and connect a GitHub repo  </p>
<p><em>Make a new repo on GitHub</em>  </p>
<ol>
<li>Go to <a href="https://github.com" target="_blank">https://github.com</a> and make sure you are logged in.  </li>
<li>Click the green &#x201C;New repository&#x201D; button. Or, if you are on your own profile page, click on &#x201C;Repositories&#x201D;, then click the green &#x201C;New&#x201D; button.  </li>
<li>Pick a repository name &#x2013; it should probably match the name of your local Project and directory.    <ul>
<li>Public or private, as appropriate  </li>
<li>DO NOT initialize this repository with a README.  </li>
</ul>
</li>
<li>Click the big green button &#x201C;Create repository.&#x201D;  </li>
<li>Copy the HTTPS clone URL to your clipboard via the green &#x201C;Clone or Download&#x201D; button.   </li>
</ol>
<p><em>Connect local repo to GitHub repo</em><br>Click on the &#x201C;two purple boxes and a white square&#x201D; in the Git pane. Click &#x201C;Add remote&#x201D;. Paste the URL here and pick a remote name, almost certainly origin. Now &#x201C;Add&#x201D;.  </p>
<p>We should be back in the &#x201C;New Branch&#x201D; dialog (if not, click on the &#x201C;two purple boxes and a white square&#x201D; in the Git pane again). I assume you&#x2019;re on the master branch want it to track master on GitHub. Enter master as the branch name and make sure &#x201C;Sync branch with remote&#x201D; is checked. Click &#x201C;Create&#x201D; (yes, even though the branch already exists). In the next dialog, choose &#x201C;overwrite&#x201D;.  </p>
<h1 id="to-install-a-package-from-github">To install a package from Github:</h1>
<p>Run the following codes:  </p>
<pre><code class="lang-r">install.packages(<span class="hljs-string">&quot;devtools&quot;</span>)  
<span class="hljs-keyword">library</span>(devtools)  
install_github(<span class="hljs-string">&quot;username/packagename&quot;</span>)
<span class="hljs-comment"># e.g.,  install_github(&quot;QingLu-USF/FirstTry&quot;)   </span>
<span class="hljs-keyword">library</span>(packagename)
</code></pre>
<h1 id="to-install-an-updated-package-from-github">To install an updated package from Github:</h1>
<ol>
<li><p>First uninstall and detach the installed package by running:  </p>
<pre><code class="lang-r">remove.packages(<span class="hljs-string">&quot;packagename&quot;</span>)  
<span class="hljs-keyword">detach</span>(<span class="hljs-string">&quot;package:packagename&quot;</span>, unload = <span class="hljs-literal">TRUE</span>)
</code></pre>
<ul>
<li>The R session may be re-started by running:  <pre><code class="lang-r">.rs.restartR()
</code></pre>
</li>
</ul>
</li>
<li><p>repeat the above codes:  </p>
<pre><code class="lang-r">install_github(<span class="hljs-string">&quot;username/packagename&quot;</span>)  
<span class="hljs-comment"># For example,  </span>
install_github(<span class="hljs-string">&quot;QingLu-USF/FirstTry&quot;</span>)   
<span class="hljs-keyword">library</span>(packagename)
</code></pre>
</li>
</ol>
<h2 id="useful-links-that-were-referred-to">Useful links that were referred to:</h2>
<ol>
<li><a href="https://happygitwithr.com/existing-github-last.html" target="_blank">https://happygitwithr.com/existing-github-last.html</a>  </li>
<li><a href="https://kbroman.org/pkg_primer/pages/github.html" target="_blank">https://kbroman.org/pkg_primer/pages/github.html</a>  </li>
<li><a href="https://r-pkgs.org/index.html" target="_blank">https://r-pkgs.org/index.html</a>  </li>
<li><a href="https://ourcodingclub.github.io/tutorials/writing-r-package/" target="_blank">https://ourcodingclub.github.io/tutorials/writing-r-package/</a>  </li>
</ol>
<p><strong><em>Below procedures were followed previously but seemed to be unnecessary. However, the format of the comments for the R script file is useful.</em></strong>   </p>
<p>Note:  the following notes are based on the content at <a href="https://ourcodingclub.github.io/tutorials/writing-r-package/" target="_blank">link</a>.</p>
<p><strong>Step 1:</strong> Install two packages for package development tools (<em>devtools</em>) and writing documentation (<em>roxygen2</em>). </p>
<pre><code class="lang-r">install.packages(<span class="hljs-string">&quot;devtools&quot;</span>)  
install.packages(<span class="hljs-string">&quot;roxygen2&quot;</span>)
</code></pre>
<p><strong>Step 2:</strong> Create an R Project in a directory on your computer<br>In the R project folder, create a folder named &quot;R&quot;. <strong>In this &quot;R&quot; folder</strong>, you may create some .R script files that contain the functions you want to have in your package, along with comments that will be used to create the help files. Below is one example of a customized .R script file that contains two function definitions.</p>
<pre><code>  #&apos; Stress Unit Conversion from psi to MPa  
  #&apos;   
  #&apos; Convert stress in psi to stress in MPa  
  #&apos; @param PSI The stress in psi  
  #&apos; @return The stress in MPa  
  #&apos; @examples   
  #&apos; stress1 &lt;- PSI_to_MPa(100);  
  #&apos; stress2 &lt;- PSI_to_MPa(c(40,60,800));  
  #&apos; @export  
      PSI_to_MPa &lt;- function(PSI){  
        MPa &lt;- PSI*0.00689476;  
        return(MPa);  
        }  

  #&apos; Stress Unit Conversion from MPa to psi  
  #&apos;   
  #&apos; Convert stress in MPa to stress in psi  
  #&apos; @param MPa The stress in MPa  
  #&apos; @return The stress in psi  
  #&apos; @examples   
  #&apos; stress1 &lt;- MPa_to_PSI(0.7);  
  #&apos; stress2 &lt;- MPa_to_PSI(c(0.4, 0.6, 0.8));  
  #&apos; @export  
      MPa_to_PSI &lt;- function(MPa){  
        PSI &lt;- MPa*145.038;  
        return(PSI);  
        }
</code></pre><p><strong>Step 3:</strong> Create a DESCRIPTION file in the R project directory (<strong>Note:</strong> not the &quot;R&quot; folder), which is a plain text file without extension.  This file will hold some of the meta-data on the R package.<br>For example, something like the following:  </p>
<pre><code>Package: FirstTry  
Type: Package  
Title: Some function definitions and data sets for Demonstration  
Version: 0.0.1.0  
Encoding: UTF-8
</code></pre><p><strong>Step 4:</strong> Run the following codes in the Console while the working directory is where the R project is.</p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(roxygen2); <span class="hljs-comment"># Read in the roxygen2 R package  </span>
roxygenise();      <span class="hljs-comment"># Builds the help files</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="setup_gitbook_github.html" class="navigation navigation-prev " aria-label="Previous page: Tips on Setting Up GitHub for Gitbook">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Useful_Resources.html" class="navigation navigation-next " aria-label="Next page: Useful Resources">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Writing R Packages","level":"1.3","depth":1,"next":{"title":"Useful Resources","level":"1.4","depth":1,"path":"Useful_Resources.md","ref":"Useful_Resources.md","articles":[]},"previous":{"title":"Tips on Setting Up GitHub for Gitbook","level":"1.2","depth":1,"path":"setup_gitbook_github.md","ref":"setup_gitbook_github.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"WritingRPackages.md","mtime":"2021-05-03T14:08:26.493Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-03T14:08:32.715Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

